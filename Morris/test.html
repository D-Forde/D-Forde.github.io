<?php
$username = "root";
$password = "";
$hostname = "localhost"; 

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
  or die("Unable to connect to MySQL");

$selected = mysql_select_db("pmd",$dbhandle) 
  or die("Could not select flot");

$result = mysql_query("SELECT resp_rate, times from records where (hour(times) between 1 and 23) AND mrn='654321'");
$yvalue = array();
$xvalue = array();
$flotData= array();

while ($row = mysql_fetch_assoc($result)) {
$xvalue[] = date("H:i",strtotime($row['times']));
$yvalue[] = $row['resp_rate'];

}

$jsonData = json_encode($flotData, true);
?>


<!DOCTYPE html>
<html>
<head>
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>
  <script src="../morris.js"></script>
<meta charset=utf-8 />
<title>Morris.js Area Chart Example</title>
</head>
<body>
  <div id="area-example"></div>
 <script>
/*
 * Play with this code and it'll update in the panel opposite.
 *
 * Why not try some of the options above?
 */
Morris.Line({
  element: 'area-example',
  data: 	
  <?php $len = count($xvalue);
		echo "[";
	for($i=0;$i < ($len-1);$i++){
		echo "{";
		echo '"times" : "'.$xvalue[$i].'",';
		echo '"resp" : "'.$yvalue[$i].'",';
		echo "},";
	}
		echo "];";
	?>
	},
  xkey: 'times',
  ykeys: ['resp'],
  labels: ['Resp_Rate']
});

 </script>
</body>
</html>
